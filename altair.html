<!DOCTYPE html>
<html lang="en">
	<head>
		<link href="http://gmpg.org/xfn/11" rel="profile">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta http-equiv="content-type" content="text/html; charset=utf-8">

		<!-- Enable responsiveness on mobile devices-->
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

		<title>cyberlingual</title>

		<!-- CSS -->
		<link href="//fonts.googleapis.com/" rel="dns-prefetch">
		<link href="//fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic|Abril+Fatface|PT+Sans:400,400italic,700&amp;subset=latin,latin-ext" rel="stylesheet">

		<link rel="stylesheet" href="https://megankarabin.github.io/cyberlingual/theme/static/css/poole.css" />
		<link rel="stylesheet" href="https://megankarabin.github.io/cyberlingual/theme/static/css/hyde.css?v=1" />
		<link rel="stylesheet" href="https://megankarabin.github.io/cyberlingual/theme/static/css/syntax.css" />
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

		<!-- RSS -->
		<link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
		<style>
			#myBtn {
			  display: none;
			  position: fixed;
			  bottom: 20px;
			  right: 30px;
			  z-index: 99;
			  font-size: 18px;
			  border: none;
			  outline: none;
			  background-color: #718A3A;
			  color: white;
			  cursor: pointer;
			  padding: 15px;
			  border-radius: 4px;
				-webkit-transition: background .3s ease-in-out;
			}

			#myBtn:hover {
			  background-color: #AFC878;
			}
		</style>
	</head>

	<body class="theme-base-0b">
<div class="sidebar">
	<div class="container sidebar-sticky">
		<div class="sidebar-about">
			<h1 class="sidebar-about">
				<a class="sidebar-about" href="https://megankarabin.github.io/cyberlingual">
					<img class="profile-picture"
					src="https://lh3.googleusercontent.com/c4Lq6ofLQEJgrxFZyB8GW9MHBAheCcecymUM-8LRfyGwH01YtEyMWnIV4KEpSe8hyMsyNRFtU1VPKtF8M1WqtEWZAtjyoFGbmRToy369ETUJCvDA0P3zJGPiXyCdmunYHZT8Sjv7jw=w2400?source=screenshot.guru">
					<!-- cyberlingual -->
					<p style="opacity:0.85"> c y b e r l i n g u a l </p>
				</a>
			</h1>
			<!-- <p class="lead" style="font-size: 11pt">  </p> -->
			<!-- <div class='pages-list'> -->
			<ul class="pages-list">
			<li class="pages-list-item"><a href="https://megankarabin.github.io/cyberlingual">
				posts </a></li>
			<li class="pages-list-item"><a href="https://megankarabin.github.io/cyberlingual/pages/projects.html">
				projects</a></li>
			<li class="pages-list-item"><a href="https://megankarabin.github.io/cyberlingual/pages/about.html">
				about</a></li>
				 </ul>
			<!-- </div> -->
		</div>
		<nav class="sidebar-nav">
			<!-- <a class="sidebar-nav-item" href="megankarabin12@gmail.com">
				<i class="fa fa-envelope"></i> -->
			<!-- </a> -->
			<a class="sidebar-nav-item" href="https://github.com/megankarabin">
				<i class="fa fa-github"></i>
			</a>
			<a class="sidebar-nav-item" href="https://www.linkedin.com/in/megan-karabin-08413aa9/">
				<i class="fa fa-linkedin"></i>
			</a>
			<a class="sidebar-nav-item" href="mailto:megankarabin12@gmail.com">
				<i class="fa fa-envelope"></i>
			</a>
			<!-- <a href="https://pseudowordz.herokuapp.com/">
			<a class="sidebar-nav-item" href="">
				<i class="fa fa-feed"></i>
			</a> -->
		</nav>
		<footer class="sidebar-footer">
			<div>
			&copy; <script>document.write(new Date().getFullYear());</script> Megan Karabin
			</div>
			<!-- <div > Built with Pelican <i class="fa fa-heart-o" aria-hidden="true"></i> </div> -->
				<!-- Inspired by pelican-hyde -->
		</footer>
	</div>
</div>		<div class="content container">
<div class="post">
	<h1 class="post-title">Altair to the Rescue: A beginner-friendly altair&nbsp;tutorial</h1>
	<span class="post-date">Sun 07 July 2019</span>
	<p><img src='images\charts_stock.png' alt='Drawing' style='width:500px;'>
<em><a href="https://www.economist.com/offthecharts/_next/static/images/offTheCharts-8552c80b7b927f2d0f3b91fe70b96521.png">Image&nbsp;source</a></em></p>
<p>Some charts are confusing, some hard to interpret, and others are just boring, while still others (albeit a special, minority few) require that the rules of math and logic break in order to establish a reality in which they make sense. By manipulating data, not only is it possible to tell a story, but to frame it in a way that fits a particular narrative. How we choose to represent data visually is a crucial part of telling the&nbsp;story.</p>
<p>This post covers the basics of Altair, walking through the first steps needed to create a visualization, and involves taking some pretty terrible charts and remaking them into their best&nbsp;selves.</p>
<h2>Table of&nbsp;Contents</h2>
<ul>
<li><a href="#bar_charts">Making bar charts in Altair</a><ul>
<li><a href="#colours">Using&nbsp;colours</a></li>
<li><a href="#axis_info">Specifying axis&nbsp;information</a></li>
<li><a href="#size">Size</a></li>
<li><a href="#title">Title</a></li>
</ul>
</li>
<li><a href="#line_chart_makeover">Line chart makeover&nbsp;1</a></li>
<li><a href="#line_chart_makeover_2">Line chart makeover&nbsp;2</a></li>
<li><a href="#before_afters">Before <span class="amp">&amp;</span>&nbsp;Afters</a></li>
</ul>
<p><strong>Packages&nbsp;used:</strong></p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">altair</span> <span class="kn">as</span> <span class="nn">alt</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="n">alt</span><span class="o">.</span><span class="n">renderers</span><span class="o">.</span><span class="n">enable</span><span class="p">(</span><span class="s1">&#39;notebook&#39;</span><span class="p">);</span>
</pre></div>


<p>&nbsp;  </p>
<h2>Making bar charts in Altair <a name='bar_charts'></a></h2>
<p>Humans aren&#8217;t great at estimating area or visual divisions of area. For this reason, donut charts are not optimal for comparing two proportions visually&mdash;bar charts work much better for&nbsp;this.</p>
<p><img src="images\donut-complaints.png" alt="Drawing" style="width: 400px;"/></p>
<blockquote>
<p><em><span class="dquo">&#8220;</span>This graphic is a breakdown of the discrimination complaints received by the Canadian Human Rights Commission in 2017-18. In that year, disability complaints represented 59% of complaints while 41% of complaints were other.&#8221;</em> (From the 2018 Federal&nbsp;budget)</p>
</blockquote>
<h4>The easiest way to fix this is to spin up a super simple dataset representing these&nbsp;data.</h4>
<p>&nbsp;<br>
Altair charts take pandas dataframes as arguments, so we throw our simple dataset into one with <code>pd.DataFrame()</code>.</p>
<div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;complaint type&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;disability-related&#39;</span><span class="p">,</span> <span class="s1">&#39;other&#39;</span><span class="p">],</span>
    <span class="s1">&#39;quantity&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.59</span><span class="p">,</span> <span class="mf">0.41</span><span class="p">]</span>
<span class="p">})</span>

<span class="n">df</span>
</pre></div>


<p>&nbsp;  </p>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>complaint type</th>
      <th>quantity</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>disability-related</td>
      <td>0.59</td>
    </tr>
    <tr>
      <th>1</th>
      <td>other</td>
      <td>0.41</td>
    </tr>
  </tbody>
</table>
</div>

<p>Now we&#8217;ll try out the simplest visualization possible.
 <!-- (one that is hopefully already a more successful representation of data than donut chart up there) -->
&nbsp;  </p>
<div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s1">&#39;sum(quantity)&#39;</span><span class="p">,</span> <span class="c1"># the &#39;x&#39; channel</span>
    <span class="n">y</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;complaint type&#39;</span><span class="p">)</span> <span class="c1"># the &#39;y&#39; channel</span>
<span class="p">)</span>
</pre></div>


<p><img alt="png" src="images/blog-2-altair_24_2.png"></p>
<p><strong>Here&#8217;s a quick breakdown of what&#8217;s happening&nbsp;here:</strong></p>
<blockquote>
<p><code>alt.Chart(df)</code> specifies the data you want to use in your chart (where df = your pandas&nbsp;dataframe)</p>
<p><code>.mark_bar()</code> specifies a bar chart as the type of visualization you want to&nbsp;use.</p>
<p><code>.encode()</code> is where you input (i.e., encode) your chart axes.
 - You can map any column in your dataset to either the &#8216;x&#8217; or &#8216;y&#8217; encoding channel (each channel corresponds to the x- and y-axis, respectively).
 - Read more in the Altair documentation <a href="https://altair-viz.github.io/getting_started/starting.html#basic-tutorial-encodings-and-marks">here</a>.</p>
</blockquote>
<h3>Using colours<a name='colours'></a></h3>
<div class="highlight"><pre><span></span><span class="n">color</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;complaint type&#39;</span><span class="p">)</span> <span class="c1"># setting colour to correspond to the selected column</span>

<span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s1">&#39;sum(quantity)&#39;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;complaint type&#39;</span><span class="p">),</span>
    <span class="n">color</span><span class="o">=</span><span class="n">color</span>
<span class="p">)</span>
</pre></div>


<p><img alt="png" src="images/blog-2-altair_27_2.png"></p>
<p>To set a particular colour scheme, use <code>scale=alt.Scale(scheme='scheme name')</code> in the <code>alt.Color</code> method.</p>
<div class="highlight"><pre><span></span><span class="n">color</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;complaint type&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="s1">&#39;reds&#39;</span><span class="p">))</span>

<span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s1">&#39;sum(quantity)&#39;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;complaint type&#39;</span><span class="p">),</span>
    <span class="n">color</span><span class="o">=</span><span class="n">color</span>
<span class="p">)</span>
</pre></div>


<p><img alt="png" src="images/blog-2-altair_29_2.png"></p>
<p><strong>Here are a few more single-hue colour&nbsp;schemes:</strong></p>
<ul>
<li>teals</li>
<li>oranges</li>
<li>reds</li>
<li>purples (&#8230;you get the&nbsp;point.)</li>
</ul>
<p><strong>The following are several more categorical and multi-hue schemes I&nbsp;like:</strong></p>
<ul>
<li>plasma</li>
<li>magma</li>
<li>accent</li>
<li>dark2</li>
<li>set3</li>
<li>tableau10</li>
</ul>
<p>Visit Vega&#8217;s <a href="https://vega.github.io/vega/docs/schemes/#categorical">colour scheme page</a> for even more&nbsp;options!</p>
<p>A default legend is provided when you set colour on a column to show you what category/value each colour corresponds to. This can be helpful but might actually be redundant, and therefore unnecessary in this case, since the information provieded by the legend is already encoded and labelled on the chart itself. To remove the legend, simply set <code>legend=None</code> in the color property. It should look something like&nbsp;this:</p>
<p><code>alt.Color('column to set color on', legend=None)</code></p>
<h4>What if I want to swap the colours of the&nbsp;bars?</h4>
<p>In the <code>alt.Color()</code> method, which uses Vega&#8217;s colour schemes, discrete colours are assigned such that the index of the value in the column you&#8217;ve set <code>color</code> on matches the index of the colour in the scheme (at the row that corresponds to the number of values present in your column). I encoded the values for <code>'complaint type'</code> as <code>['disability-related', 'other']</code>, so the default setting assigns <code>'disability-related'</code> the lighter, first-appearing colour in the image below at row&nbsp;2.</p>
<p><img src="images/colour_scheme.png" style="width: 400px;"></p>
<p>In the <code>domain</code> argument of Scale &ndash; inside <code>alt.Color(scheme=alt.Scale())</code>) &ndash; we can rearrange the order of the values so that they correspond to the order of the colours we want to assign them. Since the categories were originally encoded as <code>['disability-related', 'other']</code>, and we want to switch the colour assignments, we do so such that the order matches the order of the colours&mdash;so, in this case we&#8217;d&nbsp;want:</p>
<div class="highlight"><pre><span></span>`domain=[&#39;other&#39;, &#39;disability-related&#39;]`.
</pre></div>


<p>Of course alternatively we could just go back and change the order of the values where we first encoded them into the dataset, but this is an easy way to alter things without having to go back and make actual changes to the&nbsp;data.</p>
<div class="highlight"><pre><span></span><span class="n">color</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;complaint type&#39;</span><span class="p">,</span>
                  <span class="n">legend</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                  <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="s1">&#39;reds&#39;</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;other&#39;</span><span class="p">,</span> <span class="s1">&#39;disability-related&#39;</span><span class="p">]))</span>

<span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s1">&#39;sum(quantity)&#39;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;complaint type&#39;</span><span class="p">),</span>
    <span class="n">color</span><span class="o">=</span><span class="n">color</span>
<span class="p">)</span>
</pre></div>


<p><img alt="png" src="images/blog-2-altair_36_2.png"></p>
<h3>Specifying axis information<a name='axis_info'></a></h3>
<p>We use <code>alt.X()</code> when we want to encode more than just the column name&mdash;maybe we want to include an axis title, formatting (e.g., displaying as percentage, adjusting scale), labels and ticks,&nbsp;etc.</p>
<p>To add formatting and set the axis title, I&#8217;ll use <code>alt.Axis()</code> with the arguments &#8220;format&#8221;, which sets the text formatting pattern, and &#8220;title&#8221; (as shown in the following code). I like to keep the code in the chart specification as clean as possible, so I prefer building up this extra information outside of the <code>alt.Chart()</code> function. I&#8217;ll assign <code>alt.Axis(format='%', title='percentage of total complaints')</code> to a variable called <code>x_axis</code> so that I can simply call it from within <code>alt.X()</code> and pass it as the axis&nbsp;argument.</p>
<div class="highlight"><pre><span></span><span class="n">x_axis</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="s1">&#39;%&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;percentage of total complaints&#39;</span><span class="p">)</span>
</pre></div>


<h3>Size<a name='size'></a></h3>
<h4>Bars:</h4>
<p>You can alter the width of the bars by setting <code>size=desired size as float or int</code> in the <code>mark_*</code> method, as I&#8217;ve done below to make the bars a bit wider than the default&nbsp;width.</p>
<h4>Chart:</h4>
<p>To adjust the size of the chart, we can set custom measurements with <code>width</code> and <code>height</code> in the <code>.properties()</code> method.</p>
<div class="highlight"><pre><span></span><span class="n">chart</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;sum(quantity)&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">x_axis</span><span class="p">),</span>
    <span class="n">y</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;complaint type&#39;</span><span class="p">),</span>
    <span class="n">color</span><span class="o">=</span><span class="n">color</span>

<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Breakdown of complaints made to Canadian Human Rights Commission (2018)&#39;</span>
<span class="p">)</span>
</pre></div>


<h3>Title<a name='title'></a></h3>
<p>Every chart should have a title&mdash;donut chart is lacking here. To customize your chart title, use <code>chart.configure_title</code> .</p>
<p>Some useful&nbsp;attributes:</p>
<ul>
<li><code>anchor</code> sets the title alignment. Valid inputs are &#8216;start&#8217; (right alignment), &#8216;middle&#8217; (centre) and &#8216;end&#8217;&nbsp;(left).</li>
<li><code>orient</code> set the position of the title. Valid inputs are &#8216;top&#8217;, &#8216;bottom&#8217;, &#8216;left&#8217; and &#8216;right&#8217; (with top/bottom corresponding to above/below the&nbsp;chart).</li>
<li><code>fontSize</code></li>
<li><code>font</code></li>
<li><code>color</code></li>
</ul>
<p>Note: By throwing our chart into a variable called <code>chart</code>, we can access it in other instances without having to repeatedly include all of the code for the&nbsp;visualization.</p>
<div class="highlight"><pre><span></span><span class="n">chart</span><span class="o">.</span><span class="n">configure_title</span><span class="p">(</span>
    <span class="n">fontSize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span>
    <span class="n">font</span><span class="o">=</span><span class="s1">&#39;Helvetica&#39;</span><span class="p">,</span>
    <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;middle&#39;</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>


<p><img alt="png" src="images/blog-2-altair_45_2.png"></p>
<p>Voilà! Now this data is truly living its best&nbsp;life.</p>
<h2>Line chart makeover<a name='line_chart_makeover'></a></h2>
<p><img src='images/ghg-emissions.jpeg' style="width: 700px;"></p>
<p><em>Taken from the provinical government&#8217;s <a href="http://budget.ontario.ca/2019/chapter-1c.html#c1-20">2019&nbsp;budget</a></em></p>
<h3>What&#8217;s wrong with this&nbsp;picture?</h3>
<p>There&#8217;s no unit given for the scale on the y-axis. At first glance, it seems that while Ontario and Canada begin at the same starting point (&#8220;1&#8221;) in 2005, Ontario&#8217;s <span class="caps">GHG</span> emissions decline sharply while &#8220;the rest of Canada&#8221; experiences little variation over the same period. Notice, however, the incongruency between the title and subtitle (which supposedly describes what&#8217;s being measured)&mdash;&#8220;Ontario <span class="amp">&amp;</span> Friends&#8217; Greenhouse Gas <em>Emissions</em> from 2005 to 2016&#8221; versus &#8220;<span class="caps">GHG</span> Emissions <em>Index</em>&#8220;. An index of emissions is quite different from actual emissions in a valid unit of measurement, like megatonnes (Mt) of <span class="caps">CO2</span>. This is the unit used in the source data, and the unit I&#8217;ll be using in my reconstructed&nbsp;visualization.</p>
<p>Just doing some basic data cleaning here so I can access the relevant data from the <a href="http://publications.gc.ca/collections/collection_2018/eccc/En81-4-2016-1-eng.pdf">National Inventory Report from Environment Canada</a> (the same source used for the above&nbsp;chart).</p>
<div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;ghg-emissions-data.csv&quot;</span><span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
<span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;–&#39;</span><span class="p">,</span><span class="s1">&#39;-&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>

<span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;2005-2016&#39;</span><span class="p">,</span> <span class="s1">&#39;1990&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="s1">&#39;province&#39;</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>


<span class="n">provinces</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">ordered_vals</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">year</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="n">c</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">c</span> <span class="o">!=</span> <span class="s1">&#39;province&#39;</span><span class="p">:</span>
            <span class="n">ordered_vals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">==</span> <span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">prov</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">index</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">provinces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">prov</span><span class="p">)</span>
            <span class="n">year</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>


<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;emissions&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ordered_vals</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;province&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">provinces</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">year</span>

<span class="n">nat_drop</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;province&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Canada&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="n">provs</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">nat_drop</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>


<p>Here I&#8217;ve created a dataframe containing data on Canada&#8217;s greenhouse gas (<span class="caps">GHG</span>) emissions and including the number of emissions (in Mt of <span class="caps">CO2</span>), the year over which the emissions were released, and the province the emissions came from. <code>provs</code> is a second dataset not including the national total of emissions, whereas this figure is included in <code>data</code> .</p>
<p>There&#8217;s also a <code>point</code> argument for the <code>mark_line()</code> method. If we set <code>point=True</code>, we get the line as well as a visual representation of each of the individual data points it intersects. This can be useful for when the data is on the sparse side, and makes it clear where the actual data sit. Remember, unless you have an inordinate number of datapoints, the line is just the trend between two points. Anywhere on the line <em>between</em> two points&mdash;say, Canada&#8217;s line at the x-value halfway between 2012 and 2013&mdash;isn&#8217;t necessarily representative of the true y-values (emissions) at that value of x (circa July&nbsp;2012).</p>
<div class="highlight"><pre><span></span><span class="n">chart</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">provs</span><span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">(</span><span class="n">point</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;year:N&#39;</span><span class="p">),</span>
    <span class="n">y</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;emissions:Q&#39;</span><span class="p">),</span>
    <span class="n">color</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;province:N&#39;</span><span class="p">,</span>
                   <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span>
                   <span class="n">scheme</span><span class="o">=</span><span class="s1">&#39;category20&#39;</span><span class="p">)</span>
                   <span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s1">&#39;GHG emissions by province&#39;</span><span class="p">)</span>

<span class="n">chart</span><span class="o">.</span><span class="n">configure_axisX</span><span class="p">(</span><span class="n">labelAngle</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># this sets the angle of the x-ticks</span>
</pre></div>


<p><img alt="png" src="images/blog-2-altair_55_2.png"></p>
<p>As we can see, Ontario is actually still producing a far greater quantity of emissions than any other province except for Alberta. The following is the text accompanying the original&nbsp;chart:</p>
<blockquote>
<p><em><span class="dquo">&#8220;</span>Ontario has been a leader in the efforts to tackle climate change. Compared with 2005, the province’s total greenhouse gas emissions have dropped by 22 per cent — even while the rest of Canada saw emissions increase by three per cent during the same time&nbsp;period.&#8221;</em></p>
</blockquote>
<p>In splitting the data this way (Ontario vs. the rest of Canada) the trend observed for &#8220;the rest of Canada&#8221; is highly influenced by Alberta&#8217;s emissions. That is, the only reason the rest of Canada saw a 3% increase in emissions is because Alberta saw a substantial increase, while most other provinces either stayed the same or saw a decrease in&nbsp;emissions.</p>
<p><img src='images/i-see-u.jpeg' style="width: 100px;"></p>
<div class="highlight"><pre><span></span><span class="n">canada_tot</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;province&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Canada&#39;</span><span class="p">]</span>

<span class="n">ontario</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;province&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;ON&#39;</span><span class="p">]</span>

<span class="n">ontario</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;emissions&#39;</span><span class="p">:</span><span class="s1">&#39;emissions_on&#39;</span><span class="p">,</span> <span class="s1">&#39;province&#39;</span><span class="p">:</span> <span class="s1">&#39;province_on&#39;</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">can_on</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">canada_tot</span><span class="p">,</span> <span class="n">ontario</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">)</span>


<span class="c1"># Subtracting Ontario&#39;s yearly emissions from Canada&#39;s total yearly emissions in order to plot</span>
<span class="c1"># Ontario against the rest of Canada</span>
<span class="n">rest_of_canada</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">can_on</span><span class="p">[</span><span class="s1">&#39;emissions&#39;</span><span class="p">]:</span>           
    <span class="n">index</span> <span class="o">=</span> <span class="n">can_on</span><span class="p">[</span><span class="n">can_on</span><span class="p">[</span><span class="s1">&#39;emissions&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">on</span> <span class="o">=</span> <span class="n">can_on</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">index</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">rest_of_canada</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="n">on</span><span class="p">)</span>


<span class="n">can_on</span><span class="p">[</span><span class="s1">&#39;rest_of_canada&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rest_of_canada</span>

<span class="n">rest_of_canada</span> <span class="c1"># this now includes all the values of GHG emissions from every province but Ontario.</span>


<span class="c1"># spinning up a new dataframe with the values for the rest of Canada</span>
<span class="n">canada_minus_on</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;emissions&#39;</span><span class="p">:</span> <span class="n">rest_of_canada</span><span class="p">,</span>
    <span class="s1">&#39;province&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;rest_of_canada&#39;</span><span class="p">,</span><span class="s1">&#39;rest_of_canada&#39;</span><span class="p">,</span><span class="s1">&#39;rest_of_canada&#39;</span><span class="p">,</span><span class="s1">&#39;rest_of_canada&#39;</span><span class="p">,</span><span class="s1">&#39;rest_of_canada&#39;</span><span class="p">,</span>\
                 <span class="s1">&#39;rest_of_canada&#39;</span><span class="p">,</span><span class="s1">&#39;rest_of_canada&#39;</span><span class="p">],</span>
    <span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2005</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2012</span><span class="p">,</span> <span class="mi">2013</span><span class="p">,</span> <span class="mi">2014</span><span class="p">,</span> <span class="mi">2015</span><span class="p">,</span> <span class="mi">2016</span><span class="p">]</span>
<span class="p">})</span>

<span class="n">totals</span> <span class="o">=</span> <span class="n">provs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">canada_minus_on</span><span class="p">)</span>

<span class="c1"># comparing Ontario and the rest of Canada</span>
<span class="n">can_vs_on</span> <span class="o">=</span> <span class="n">totals</span><span class="p">[(</span><span class="n">totals</span><span class="p">[</span><span class="s1">&#39;province&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;rest_of_canada&#39;</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">totals</span><span class="p">[</span><span class="s1">&#39;province&#39;</span><span class="p">]</span><span class="o">==</span> <span class="s1">&#39;ON&#39;</span><span class="p">)]</span>
</pre></div>


<h4>Finally, a slightly more accurate visual depiction of these&nbsp;data.</h4>
<div class="highlight"><pre><span></span><span class="n">axis</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;emissions (in Mt of CO2)&#39;</span><span class="p">)</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">can_vs_on</span><span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">(</span><span class="n">point</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;year:N&#39;</span><span class="p">),</span>
    <span class="n">y</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;emissions:Q&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">),</span>
    <span class="n">color</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;province:N&#39;</span><span class="p">,</span>
                   <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span>
                   <span class="n">scheme</span><span class="o">=</span><span class="s1">&#39;plasma&#39;</span><span class="p">)</span>
                   <span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Ontario and the Rest of Canada</span><span class="se">\&#39;</span><span class="s1">s GHG Emissions from 2005 to 2016&#39;</span><span class="p">)</span>

<span class="n">chart</span><span class="o">.</span><span class="n">configure_axisX</span><span class="p">(</span><span class="n">labelAngle</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># this sets the angle of the x-ticks</span>
</pre></div>


<p><img alt="png" src="images/blog-2-altair_60_2.png"></p>
<p>From this representation, it&#8217;s clear that Ontario and the rest of Canada have drastically different starting points&mdash;quite contrary to what the chart from the budget would have you&nbsp;think.</p>
<h2>Another line chart makeover<a name='line_chart_makeover_2'></a></h2>
<p><img src="images/aul-fakenews.jpeg" style="width: 600px;">  </p>
<h4>What&#8217;s wrong with this&nbsp;picture?</h4>
<ul>
<li>
<p>No scale for&nbsp;y-axis</p>
</li>
<li>
<p>Missing axis&nbsp;labels</p>
</li>
<li>
<p>Differing y-axes for each line, since the number of prevention services performed in 2013 still far exceeds the number of abortions (in the order of 600,000), and yet the prevention data at 2013 is depicted as below the data for abortions at the exact same&nbsp;x-value.</p>
<p><img src='images/side-eye.png' style="width: 200px;"></p>
</li>
<li>
<p>You&#8217;ll also notice the slopes of the lines are about the same, upon quick visual inspection. The difference between abortions performed in 2006 (289,750) and those performed in 2013 (327,000) is much less than the difference between prevention services performed in 2006 (2,007,371) and those performed in 2013 (935,573). We can further quantify this by comparing the&nbsp;slopes:</p>
</li>
</ul>
<div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;The slope of A (abortions) is: {round((327_000 - 289_750) / (2013 - 2006), 2)}&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;The slope of B (cancer screening and prevention services) is: {(935_573 - 2_007_371) / (2013 - 2006)}&#39;</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>The slope of A (abortions) is: 5321.43
The slope of B (cancer screening and prevention services) is: -153114.0
</pre></div>


<p><center>
<em>m<sub>A</sub></em> =&nbsp;5321.43</p>
<p><center>
<em>m<sub>B</sub></em> =&nbsp;-153114.0</p>
<p></center>
 </center></p>
<p><strong>What does this&nbsp;mean?</strong></p>
<p>Every year (i.e., for every 1 unit in increase along the x-axis), there are 5321 more abortions&nbsp;performed.</p>
<p>Every year, there are 153114 fewer prevention and screening services&nbsp;performed.</p>
<div class="highlight"><pre><span></span><span class="n">aul_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;service&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;abortion&#39;</span><span class="p">,</span> <span class="s1">&#39;abortion&#39;</span><span class="p">,</span> <span class="s1">&#39;cancer screening &amp; prevention&#39;</span><span class="p">,</span> \
                <span class="s1">&#39;cancer screening &amp; prevention&#39;</span><span class="p">],</span>
    <span class="s1">&#39;services performed&#39;</span><span class="p">:[</span><span class="mi">289</span><span class="n">_750</span><span class="p">,</span> <span class="mi">327</span><span class="n">_000</span><span class="p">,</span> <span class="mi">2</span><span class="n">_007_371</span><span class="p">,</span> <span class="mi">985</span><span class="n">_573</span><span class="p">],</span>
    <span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2006</span><span class="p">,</span> <span class="mi">2013</span><span class="p">,</span> <span class="mi">2006</span><span class="p">,</span> <span class="mi">2013</span><span class="p">]</span>
<span class="p">})</span>

<span class="n">aul_df</span><span class="o">.</span><span class="n">year</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">aul_df</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s1">&#39;%Y&#39;</span><span class="p">)</span>

<span class="n">aul_df</span><span class="p">[</span><span class="s1">&#39;services performed&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">/</span><span class="mi">1000</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">aul_df</span><span class="p">[</span><span class="s1">&#39;services performed&#39;</span><span class="p">]]</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="n">x_axis</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Year&#39;</span><span class="p">,</span> <span class="n">titleFontSize</span><span class="o">=</span><span class="mi">13</span><span class="p">)</span>
<span class="n">y_axis</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Services Performed (in thousands)&#39;</span><span class="p">,</span> <span class="n">titleFontSize</span><span class="o">=</span><span class="mi">13</span><span class="p">)</span>

<span class="n">color</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;service&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="s1">&#39;magma&#39;</span><span class="p">))</span>   

<span class="n">ppchart</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">aul_df</span><span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">x_axis</span><span class="p">),</span>
    <span class="n">y</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;services performed&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">y_axis</span><span class="p">),</span>
    <span class="n">color</span><span class="o">=</span><span class="n">color</span>

<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span> <span class="s1">&#39;Planned Parenthood Services Performed in 2006 and 2013&#39;</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">400</span>
<span class="p">)</span>

<span class="n">ppchart</span><span class="o">.</span><span class="n">configure_title</span><span class="p">(</span>
    <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;middle&#39;</span><span class="p">,</span>
    <span class="n">fontSize</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span>
    <span class="n">font</span><span class="o">=</span><span class="s1">&#39;Helvetica&#39;</span>
<span class="p">)</span>

<span class="n">ppchart</span><span class="o">.</span><span class="n">configure_legend</span><span class="p">(</span>
    <span class="n">columns</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">strokeColor</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span>
    <span class="n">fillColor</span><span class="o">=</span><span class="s1">&#39;#EEEEEE&#39;</span><span class="p">,</span>
    <span class="n">padding</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
    <span class="n">cornerRadius</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;top-right&#39;</span>
<span class="p">)</span>
</pre></div>


<p><img alt="png" src="images/blog-2-altair_70_2.png"></p>
<p>How this chart is&nbsp;better:</p>
<ul>
<li>
<p>uses a valid, to-scale&nbsp;y-axis</p>
</li>
<li>
<p>labels for both&nbsp;axes</p>
</li>
<li>
<p>it has a consistent, shared y-axis for both&nbsp;lines.</p>
</li>
</ul>
<h1>✨Before <span class="amp">&amp;</span> Afters ✨<a name='before_afters'></a></h1>
<h2>Chart&nbsp;1</h2>
<p><tr>
    <td> <img src="images\images\donut-complaints.png" alt="Drawing" style="width: 300px;"/> </td>
    <td> <img src="images\images\complaints.svg" alt="Drawing" style="width: 650px;"/> </td>
    </tr></p>
<h2>Chart&nbsp;2</h2>
<p><tr>
    <td> <img src="images\ghg-emissions.jpeg" alt="Drawing" style="width: 600px;"/> </td>
    <td> <img src="images\emissions-1.svg" alt="Drawing" style="width: 700px;"/> </td>
    </tr></p>
<h2>Chart&nbsp;3</h2>
<p><tr>
    <td> <img src="images\aul-fakenews.jpeg" alt="Drawing" style="width: 500px;"/> </td>
    <td> <img src="images\pp-visualization.svg" alt="Drawing" style="width: 500px;"/> </td>
    </tr></p>
<h3>Good luck making great visualizations with Altair&nbsp;🚀</h3>
</div>
<!--  -->
<footer class="page-footer">
	<div style="font-size:8pt">
			&copy; <script>document.write(new Date().getFullYear());</script> Megan Karabin
	</div>
	<div style="font-size:8pt;">
		Built with Pelican <i class="fa fa-heart-o" aria-hidden="true"></i> Theme derived from
		<a href="https://github.com/jvanz/pelican-hyde"> pelican-hyde </a>
	</div>
 </footer>
		</div>

		<!-- JS -->
		<button onclick="topFunction()" id="myBtn" title="Go to top">Back to top</button>

		<script>
		//Get the button
		var mybutton = document.getElementById("myBtn");

		// When the user scrolls down 20px from the top of the document, show the button
		window.onscroll = function() {scrollFunction()};

		function scrollFunction() {
		  if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
		    mybutton.style.display = "block";
		  } else {
		    mybutton.style.display = "none";
		  }
		}

		// When the user clicks on the button, scroll to the top of the document
		function topFunction() {
		  document.body.scrollTop = 0;
		  document.documentElement.scrollTop = 0;
		}
		</script>
	</body>
</html>