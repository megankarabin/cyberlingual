<!DOCTYPE html>
<html lang="en">
	<head>
		<link href="http://gmpg.org/xfn/11" rel="profile">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta http-equiv="content-type" content="text/html; charset=utf-8">

		<!-- Enable responsiveness on mobile devices-->
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

		<title>cyberlingual</title>

		<!-- CSS -->
		<link href="//fonts.googleapis.com/" rel="dns-prefetch">
		<link href="//fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic|Abril+Fatface|PT+Sans:400,400italic,700&amp;subset=latin,latin-ext" rel="stylesheet">

		<link rel="stylesheet" href="https://megankarabin.github.io/cyberlingual/theme/static/css/poole.css" />
		<link rel="stylesheet" href="https://megankarabin.github.io/cyberlingual/theme/static/css/hyde.css?v=1" />
		<link rel="stylesheet" href="https://megankarabin.github.io/cyberlingual/theme/static/css/syntax.css" />
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

		<!-- RSS -->
		<link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
		<style>
			#myBtn {
			  display: none;
			  position: fixed;
			  bottom: 20px;
			  right: 30px;
			  z-index: 99;
			  font-size: 18px;
			  border: none;
			  outline: none;
			  background-color: #718A3A;
			  color: white;
			  cursor: pointer;
			  padding: 15px;
			  border-radius: 4px;
				-webkit-transition: background .3s ease-in-out;
			}

			#myBtn:hover {
			  background-color: #AFC878;
			}
		</style>
	</head>

	<body class="theme-base-0b">
<div class="sidebar">
	<div class="container sidebar-sticky">
		<div class="sidebar-about">
			<h1 class="sidebar-about">
				<a class="sidebar-about" href="https://megankarabin.github.io/cyberlingual">
					<img class="profile-picture"
					src="https://lh3.googleusercontent.com/c4Lq6ofLQEJgrxFZyB8GW9MHBAheCcecymUM-8LRfyGwH01YtEyMWnIV4KEpSe8hyMsyNRFtU1VPKtF8M1WqtEWZAtjyoFGbmRToy369ETUJCvDA0P3zJGPiXyCdmunYHZT8Sjv7jw=w2400?source=screenshot.guru">
					<!-- cyberlingual -->
					<p style="opacity:0.85"> c y b e r l i n g u a l </p>
				</a>
			</h1>
			<!-- <p class="lead" style="font-size: 11pt">  </p> -->
			<!-- <div class='pages-list'> -->
			<ul class="pages-list">
			<li class="pages-list-item"><a href="https://megankarabin.github.io/cyberlingual">
				posts </a></li>
			<li class="pages-list-item"><a href="https://megankarabin.github.io/cyberlingual/pages/projects.html">
				projects</a></li>
			<li class="pages-list-item"><a href="https://megankarabin.github.io/cyberlingual/pages/about.html">
				about</a></li>
				 </ul>
			<!-- </div> -->
		</div>
		<nav class="sidebar-nav">
			<!-- <a class="sidebar-nav-item" href="megankarabin12@gmail.com">
				<i class="fa fa-envelope"></i> -->
			<!-- </a> -->
			<a class="sidebar-nav-item" href="https://github.com/megankarabin">
				<i class="fa fa-github"></i>
			</a>
			<a class="sidebar-nav-item" href="https://www.linkedin.com/in/megan-karabin-08413aa9/">
				<i class="fa fa-linkedin"></i>
			</a>
			<a class="sidebar-nav-item" href="mailto:megankarabin12@gmail.com">
				<i class="fa fa-envelope"></i>
			</a>
			<!-- <a href="https://pseudowordz.herokuapp.com/">
			<a class="sidebar-nav-item" href="">
				<i class="fa fa-feed"></i>
			</a> -->
		</nav>
		<footer class="sidebar-footer">
			<div>
			&copy; <script>document.write(new Date().getFullYear());</script> Megan Karabin
			</div>
			<!-- <div > Built with Pelican <i class="fa fa-heart-o" aria-hidden="true"></i> </div> -->
				<!-- Inspired by pelican-hyde -->
		</footer>
	</div>
</div>		<div class="content container">
<div class="post">
	<h1 class="post-title">Advanced Jinja: filters <span class="amp">&amp;</span>&nbsp;variables</h1>
	<span class="post-date">Tue 06 August 2019</span>
	<p><img src="images\jinja_logo.png" alt="Drawing" style="width: 500px;"/>
<em><a href="https://upload.wikimedia.org/wikipedia/commons/thumb/8/87/Jinja_software_logo.svg/1200px-Jinja_software_logo.svg.png">Image&nbsp;source</a></em></p>
<p>Want to learn how to be a Jinja ninja? (Since discovering Jinja I&#8217;ve wanted to use those words together in a sentence and this seemed like the perfect&nbsp;opportunity.)</p>
<p>The current post explains how you can use Jinja filters to access python functions and libraries from within an html doc, and how to create new variables from <em>within</em> your Jinja template (rather than from the python script linked to the&nbsp;template).</p>
<p>I&#8217;ll be assuming basic familiarity with Jinja, so if you need to brush up on the basics first, check out my friend Vishal&#8217;s <a href="https://vishalsharma01.github.io/Blog/blog-3.html">introductory Jinja2 blog post</a>.</p>
<h2>Table of&nbsp;contents</h2>
<ul>
<li><a href="#jinja">Recap: What is&nbsp;Jinja?</a></li>
<li><a href="#install">Installation</a></li>
<li><a href="#temp_load">Loading data with template&nbsp;loader</a></li>
<li><a href="#filters">Filters</a></li>
<li><a href="#functions">Custom&nbsp;functions</a></li>
<li><a href="#vars">Setting&nbsp;variables</a></li>
</ul>
<h3>Recap: What is Jinja?<a name='jinja'></a></h3>
<p>Jinja is a python library and a <strong>template engine</strong>, which is a software designed to let you produce a text output from your code. Of course, in python, we could just do that using <code>print('your text output')</code>.</p>
<p><strong>What&#8217;s special about a template engine and why might I need&nbsp;one?</strong></p>
<p>Jinja enables your code to communicate with a template, like an <span class="caps">HTML</span> document, which traditionally only allows for static inputs and outputs. <span class="caps">HTML</span> doesn&#8217;t have an ability to use control flow, or encode mutable variables, for instance. There are many template engines out there, but Jinja is built specifically to interact with python. Using Jinja, you can use python programming within an <span class="caps">HTML</span> document such that our outputs are dynamic and consistent with any document-external data you&#8217;re using in your web&nbsp;application.</p>
<h3>Installation<a name='install'></a></h3>
<p>If you haven&#8217;t already done so, you can install Jinja by running either of the following&nbsp;commands:</p>
<div class="highlight"><pre><span></span>easy_install Jinja2
pip install Jinja2
</pre></div>


<p>If neither of these work and you&#8217;re having trouble installing, check out the documentation <a href="http://jinja.pocoo.org/docs/2.10/intro/#installation">here</a> for more detailed&nbsp;instructions.</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pathlib</span>
<span class="kn">from</span> <span class="nn">jinja2</span> <span class="kn">import</span> <span class="n">Template</span>
<span class="kn">from</span> <span class="nn">jinja2</span> <span class="kn">import</span> <span class="n">Environment</span><span class="p">,</span> <span class="n">FileSystemLoader</span>
<span class="kn">from</span> <span class="nn">IPython.core.display</span> <span class="kn">import</span> <span class="n">HTML</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;j-templates/&quot;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>


<h3>Template loader <span class="amp">&amp;</span> Environment<a name='temp_load'></a></h3>
<div class="highlight"><pre><span></span><span class="n">file_loader</span> <span class="o">=</span> <span class="n">FileSystemLoader</span><span class="p">(</span><span class="s1">&#39;j-templates&#39;</span><span class="p">)</span>
            <span class="c1"># loads files from a specified directory (the so-called &quot;file system&quot; -- here, the one</span>
            <span class="c1"># we&#39;ve just created, &#39;j-templates&#39;)</span>

<span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">(</span><span class="n">loader</span><span class="o">=</span><span class="n">file_loader</span><span class="p">)</span>
                <span class="c1"># the &quot;loader&quot; argument sets the template loader for this environment.</span>
</pre></div>


<p>The <strong>template loader</strong> is the file system (i.e., directory) from which you&#8217;ll be accessing files/templates. It&#8217;s helpful to do this when you&#8217;ll be spinning up toy files to practice on or use for&nbsp;demonstration.</p>
<p>The <strong>template class &#8220;<code>Environment</code><span class="dquo">&#8220;</span></strong> is the core component of Jinja. Instances of it are used to store global variables and load templates, but generally you won&#8217;t need to configure custom instances of it when you&#8217;re using Jinja in an application &mdash; most instantiate just once (automatically) upon initializing the&nbsp;application.</p>
<p>The examples use a pokemon dataset, so here I&#8217;m just reading that&nbsp;in.</p>
<div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;hackathon/data/pokemon.csv&#39;</span><span class="p">)</span>

<span class="n">pokemon</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>


<h3>Filters<a name='filters'></a></h3>
<p>Filters are an incredibly helpful feature baked into Jinja &ndash; <strong>they allow you to use any desired python functions (including ones you&#8217;ve written), libraries and/or modules along with their associated&nbsp;methods.</strong></p>
<p>Below, I want to get a randomly generated pokemon from my list of pokemon, and for that I&#8217;ll need <code>np.random.choice</code>. I am <strong>not</strong> able to simply use code that looks like the following code&nbsp;block:</p>
<p><img src='https://i.imgur.com/ySrLNu6.png' width=350px;></p>
<p>The above code is invalid and won&#8217;t run. This is where the magic of Jinja2 comes in: <strong>Jinja can access libraries through&nbsp;filters.</strong></p>
<h3><code>env.filters</code></h3>
<p>The filters for an environment can be viewed by calling the dot filters (<code>.filters</code>) method, which will provide you with a dictionary whose keys are the filters (their names) and whose values are the particular object they&nbsp;house.</p>
<p>By creating your own filter as a key-value pair, you can use virtually any Python function or library via Jinja! Below I&#8217;m setting a new key called <code>"select_random"</code> containing the random choice&nbsp;function.</p>
<p><em>Make sure to import the necessary libraries, modules and/or functions beforehand and create any aliases you want to use &mdash; e.g., I imported numpy as np&nbsp;earlier.</em></p>
<div class="highlight"><pre><span></span><span class="n">env</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="s1">&#39;select_random&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span>
</pre></div>


<p>Now, as shown in the following code output, the new <code>select_random</code> key has been added to the dictionary (at the very&nbsp;bottom).</p>
<div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">filters</span><span class="p">))</span> <span class="c1"># this will tell us how many actual keys there are</span>
</pre></div>


<div class="highlight"><pre><span></span>54
</pre></div>


<div class="highlight"><pre><span></span><span class="c1"># indexing the last 10 to demonstrate what the</span>
<span class="c1"># dictionary looks like without having 50+ key-value pairs</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">filters</span><span class="p">)[</span><span class="mi">40</span><span class="p">:]:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">{i}</span><span class="se">\&#39;</span><span class="s1"> :&#39;</span><span class="p">,</span> <span class="n">env</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</pre></div>


<div class="highlight"><pre><span></span>&#39;striptags&#39; : &lt;function do_striptags at 0x115287730&gt;
&#39;sum&#39; : &lt;function do_sum at 0x1155909d8&gt;
&#39;title&#39; : &lt;function do_title at 0x1152999d8&gt;
&#39;trim&#39; : &lt;function do_trim at 0x1152876a8&gt;
&#39;truncate&#39; : &lt;function do_truncate at 0x115287378&gt;
&#39;unique&#39; : &lt;function do_unique at 0x115299b70&gt;
&#39;upper&#39; : &lt;function do_upper at 0x1152997b8&gt;
&#39;urlencode&#39; : &lt;function do_urlencode at 0x1152996a8&gt;
&#39;urlize&#39; : &lt;function do_urlize at 0x115287268&gt;
&#39;wordcount&#39; : &lt;function do_wordcount at 0x115287488&gt;
&#39;wordwrap&#39; : &lt;function do_wordwrap at 0x115287400&gt;
&#39;xmlattr&#39; : &lt;function do_xmlattr at 0x1152998c8&gt;
&#39;tojson&#39; : &lt;function do_tojson at 0x11529b2f0&gt;
&#39;select_random&#39; : &lt;built-in method choice of mtrand.RandomState object at 0x106cd57e0&gt;
</pre></div>


<p>Now, in Jinja, you can call the function that this filter contains. The way this is done is quite simple, though slightly different from how we&#8217;re used to calling functions with typical python syntax. For a function in python that looks like&nbsp;this:</p>
<div class="highlight"><pre><span></span>function(arg)
</pre></div>


<p>here&#8217;s how it&#8217;s formulated in&nbsp;Jinja:</p>
<div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">arg</span> <span class="o">|</span> <span class="nf">function</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>


<p>See the example below using the newly created <code>select_random</code> filter.</p>
<div class="highlight"><pre><span></span><span class="o">%%</span><span class="n">writefile</span> <span class="n">j</span><span class="o">-</span><span class="n">templates</span><span class="o">/</span><span class="n">fun</span><span class="o">.</span><span class="n">html</span>

<span class="o">&lt;</span><span class="err">!</span><span class="n">DOCTYPE</span> <span class="n">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">html</span> <span class="n">lang</span><span class="o">=</span><span class="s2">&quot;en&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="n">My</span> <span class="n">pokemon</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>

 <span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">My</span> <span class="n">randomly</span> <span class="n">selected</span> <span class="n">pokémon</span> <span class="p">:</span> <span class="p">{{</span> <span class="n">my_pokemon</span><span class="o">|</span><span class="n">select_random</span> <span class="p">}}</span> <span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>

<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</pre></div>


<div class="highlight"><pre><span></span>Overwriting j-templates/fun.html
</pre></div>


<div class="highlight"><pre><span></span><span class="n">template</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">get_template</span><span class="p">(</span><span class="s1">&#39;fun.html&#39;</span><span class="p">)</span>
<span class="c1"># making a jinja template for the file we created in the above codeblock</span>

<span class="n">output</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">my_pokemon</span><span class="o">=</span><span class="n">pokemon</span><span class="p">)</span>
<span class="c1"># assigning our pokemon variable (and all of its contents) to a jinja template variable, which we&#39;re calling &#39;my_pokemon&#39;</span>

<span class="n">HTML</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
</pre></div>


<!DOCTYPE html>
<html lang="en">
<head>
    <title>My pokemon</title>
</head>

<p><p>My randomly selected pokémon :&nbsp;Starmie </p></p>
<p></html></p>
<p>To break down what&#8217;s happening&nbsp;here:</p>
<div class="highlight"><pre><span></span>env.get_template()
</pre></div>


<p>Calling this method on our environment will load whatever we input (i.e., the desired file) as a Jinja template.
This is how we &#8220;tell&#8221; Jinja that this is the file we want to use. We&#8217;re then throwing the result into a variable called <code>template</code>.</p>
<div class="highlight"><pre><span></span>template.render
</pre></div>


<p>Performing the previous step sets up the file as a Jinja template, which then means we can use the <code>.render</code> method on it. The arguments passed to <code>template.render</code> are the names of all variables to be used in the script.
This step is crucial to ensuring that the template can communicate with/access variables in our python&nbsp;script.</p>
<h2>Custom functions<a name='functions'></a></h2>
<p>The beauty of filters is that we can write any function in python and &#8220;import&#8221; it into jinja this&nbsp;way.</p>
<p>Building on top of the last example, where we built in the random generator, let&#8217;s say that I only like fire pokemon, and want to print &#8220;good&#8221; every time the randomly selected pokemon is a fire type and &#8220;bad&#8221; for every one <em>not</em> of type fire, along with their actual type. I can write a quick function to do this and then use a filter to bring it into&nbsp;Jinja.</p>
<p>Note that because we want to reuse the randomly generated pokemon, we&#8217;ll have to use a variable (Jinja&#8217;s syntax isn&#8217;t as flexible as python&#8217;s and doesn&#8217;t allow for infinite nesting using brackets). This is made fairly simple using Jinja&#8217;s <code>{% set x = y %}</code> syntax.</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">is_fire_pokemon</span><span class="p">(</span><span class="n">pokemon</span><span class="o">=</span><span class="s1">&#39;Charmander&#39;</span><span class="p">):</span>
    <span class="n">poketype_1</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">pokemon</span><span class="p">][</span><span class="s1">&#39;type_1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">poketype_1</span> <span class="o">==</span> <span class="s1">&#39;Fire&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">f</span><span class="s1">&#39;{pokemon}, Good&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">f</span><span class="s1">&#39;{pokemon}, Bad: {poketype_1}&#39;</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="n">is_fire_pokemon</span><span class="p">(</span><span class="s1">&#39;Rattata&#39;</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>&#39;Rattata, Bad: Normal&#39;
</pre></div>


<p>Now that we have our custom function, let&#8217;s make a filter for&nbsp;it.</p>
<div class="highlight"><pre><span></span><span class="n">env</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="s1">&#39;is_fire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">is_fire_pokemon</span>

<span class="n">env</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="s1">&#39;is_fire&#39;</span><span class="p">]</span>
</pre></div>


<div class="highlight"><pre><span></span>&lt;function __main__.is_fire_pokemon(pokemon=&#39;Charmander&#39;)&gt;
</pre></div>


<p><strong>Note on calling a function vs. the function&nbsp;object:</strong></p>
<p>Notice that we don&#8217;t write <code>is_fire_pokemon(pokemon)</code>&mdash; instead, input the function as its name on its own, <strong>without</strong> brackets. You don&#8217;t want to call the function at this point, because the the function&#8217;s output would get stored as the value of the key we&#8217;re setting. Rather, you want to provide a reference to the function&nbsp;object.</p>
<p>Take a look at the difference in what&#8217;s being stored when we set <code>env.filters['is_fire'] = is_fire_pokemon</code> versus <code>is_fire_pokemon(pokemon)</code>:</p>
<div class="highlight"><pre><span></span><span class="n">env</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="s1">&#39;is_fire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">is_fire_pokemon</span><span class="p">(</span><span class="n">pokemon</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="s1">&#39;is_fire&#39;</span><span class="p">])</span>
</pre></div>


<div class="highlight"><pre><span></span>Charmander, Good
</pre></div>


<div class="highlight"><pre><span></span><span class="n">env</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="s1">&#39;is_fire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">is_fire_pokemon</span>

<span class="k">print</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="s1">&#39;is_fire&#39;</span><span class="p">])</span>
</pre></div>


<div class="highlight"><pre><span></span>&lt;function is_fire_pokemon at 0x114e422f0&gt;
</pre></div>


<p>In the first case, what&#8217;s being stored as the filter is the value returned by the function &ndash; essentially, you&#8217;re calling the function <em>as</em> it&#8217;s being stored, and in doing so, saving whatever it returns as the filter, which isn&#8217;t what you want.  It&#8217;s the function object itself that must be set as a filter, and this is done by omitting brackets and&nbsp;arguments.</p>
<h2>Setting variables<a name='vars'></a></h2>
<p>Now that we&#8217;re familiar with the calling of functions in Jinja through filters, we can add another layer:&nbsp;variables.</p>
<p>If you&#8217;ve made it this far, I probably don&#8217;t need to elaborate on the usefulness of local variables, so let&#8217;s dive right into the&nbsp;code.</p>
<p>The instantiation process is quite straightforward: identical to how one assigns variables in regular python, with the one added step of wrapping your variable assignment&nbsp;inside</p>
<div class="highlight"><pre><span></span>{% var = goes here %}
</pre></div>


<div class="highlight"><pre><span></span><span class="o">%%</span><span class="n">writefile</span> <span class="n">j</span><span class="o">-</span><span class="n">templates</span><span class="o">/</span><span class="n">fun2</span><span class="o">.</span><span class="n">html</span>

<span class="o">&lt;</span><span class="err">!</span><span class="n">DOCTYPE</span> <span class="n">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">html</span> <span class="n">lang</span><span class="o">=</span><span class="s2">&quot;en&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="n">My</span> <span class="n">pokemon</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>

 <span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">My</span> <span class="n">randomly</span> <span class="n">selected</span> <span class="n">pokémon</span> <span class="p">:</span>
        <span class="p">{</span><span class="o">%</span> <span class="nb">set</span> <span class="n">p</span> <span class="o">=</span> <span class="n">my_pokemon</span><span class="o">|</span><span class="n">select_random</span> <span class="o">%</span><span class="p">}</span>
        <span class="p">{{</span> <span class="n">p</span><span class="o">|</span><span class="n">is_fire</span> <span class="p">}}</span>
    <span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>

<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</pre></div>


<div class="highlight"><pre><span></span>Overwriting j-templates/fun2.html
</pre></div>


<p>Here I&#8217;ve set <code>p = my_pokemon|select_random</code> in order to pass it to my <code>is_fire_pokemon</code> function (which is contained in the <code>is_fire</code> filter).</p>
<div class="highlight"><pre><span></span><span class="n">template</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">get_template</span><span class="p">(</span><span class="s1">&#39;fun2.html&#39;</span><span class="p">)</span>
<span class="n">output</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">my_pokemon</span><span class="o">=</span><span class="n">pokemon</span><span class="p">)</span>

<span class="n">HTML</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
</pre></div>


<!DOCTYPE html>
<html lang="en">
<head>
    <title>My pokemon</title>
</head>

<p><p>My randomly selected pokémon&nbsp;:</p>
<div class="highlight"><pre><span></span>    Cubone, Bad: Ground
&lt;/p&gt;
</pre></div>


<p></html></p>
<!-- <img src='https://vignette.wikia.nocookie.net/looneytunes/images/e/e1/All.jpg/revision/latest?cb=20150313020828' style='width:500px;'> -->

<h2>Good luck on your Jinja adventures&nbsp;:-)</h2>
</div>
<!--  -->
<footer class="page-footer">
	<div style="font-size:8pt">
			&copy; <script>document.write(new Date().getFullYear());</script> Megan Karabin
	</div>
	<div style="font-size:8pt;">
		Built with Pelican <i class="fa fa-heart-o" aria-hidden="true"></i> Theme derived from
		<a href="https://github.com/jvanz/pelican-hyde"> pelican-hyde </a>
	</div>
 </footer>
		</div>

		<!-- JS -->
		<button onclick="topFunction()" id="myBtn" title="Go to top">Back to top</button>

		<script>
		//Get the button
		var mybutton = document.getElementById("myBtn");

		// When the user scrolls down 20px from the top of the document, show the button
		window.onscroll = function() {scrollFunction()};

		function scrollFunction() {
		  if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
		    mybutton.style.display = "block";
		  } else {
		    mybutton.style.display = "none";
		  }
		}

		// When the user clicks on the button, scroll to the top of the document
		function topFunction() {
		  document.body.scrollTop = 0;
		  document.documentElement.scrollTop = 0;
		}
		</script>
	</body>
</html>